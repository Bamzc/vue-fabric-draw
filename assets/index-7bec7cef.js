var e=(e,a,t)=>new Promise(((l,s)=>{var n=e=>{try{i(t.next(e))}catch(a){s(a)}},o=e=>{try{i(t.throw(e))}catch(a){s(a)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(n,o);i((t=t.apply(e,a)).next())}));import{u as a,s as t,a as l,P as s,_ as n,b as o,c as i}from"./index-7799dc99.js";import{j as c,r,k as d,S as u,R as p,O as m,u as f,B as h,K as v,c as g,J as x,l as _,ad as w,U as y,V as b,m as j,X as k,P,a6 as I,av as R,aw as S}from"./vue-7635db6f.js";import{A as C,m as U,n as V,s as B,o as E,p as H,B as L,C as z,l as A,D as M,F as N,G as O,H as W,I as q}from"./element-plus-6a35cfe2.js";import{g as D}from"./index-485f9573.js";import{t as F}from"./lodash-es-2c042c7a.js";import"./fabric-f2fc9420.js";import"./clipper-lib-fc83c972.js";const G=""+new URL("logo-93940820.svg",import.meta.url).href,J=c({__name:"MainSearch",setup(e){const a=r("1");return(e,t)=>{const l=U,s=V,n=B,o=E,i=H;return d(),u(i,{gutter:20,class:"h-[100px] flex items-center row-home"},{default:p((()=>[m(o,{span:10,offset:7},{default:p((()=>[m(n,{class:"h-[40px]","prefix-icon":f(C),placeholder:"五一假期"},{append:p((()=>[m(s,{modelValue:f(a),"onUpdate:modelValue":t[0]||(t[0]=e=>h(a)?a.value=e:null),placeholder:"Select"},{default:p((()=>[m(l,{label:"精选模版",value:"1"}),m(l,{label:"我的空间",value:"2"})])),_:1},8,["modelValue"])])),_:1},8,["prefix-icon"])])),_:1})])),_:1})}}}),K=e=>(R("data-v-d9d3b263"),e=e(),S(),e),T=K((()=>j("img",{src:G,alt:"",class:"h-full"},null,-1))),X={key:0,class:"cursor-pointer"},$={key:1},Q={class:"flex w-[30px] justify-center"},Y=K((()=>j("span",null,"为你推荐",-1))),Z={class:"flex w-[30px] justify-center"},ee=K((()=>j("span",null,"智能AI",-1))),ae={class:"flex w-[30px] justify-center"},te=K((()=>j("span",null,"模版空间",-1))),le=K((()=>j("b",{class:"text-[20px]"},"今日推荐",-1))),se=["src","onClick"],ne={class:"title"},oe={class:"content ellipsis_2"},ie=i(c({__name:"index",setup(i){const c=l(),u=a(),h=r(!1),{loginStatus:R,username:S}=t(u),C=v({loading:!1,page:1,totalPage:1,column:6,move:!0,items:[]}),U=F((()=>e(this,null,(function*(){const e=document.getElementById("main");e.scrollHeight-(e.scrollTop+e.clientHeight)<=200&&C.page<C.totalPage&&(C.page+=1,yield B())}))),300),V=e=>{h.value=e},B=()=>e(this,null,(function*(){const e={page:C.page,size:s},a=yield D(e);a.data&&200===a.data.code&&(C.page=a.data.data.page,C.totalPage=a.data.data.total_pages,C.items=C.items.concat(a.data.data.items))}));let G;return g((()=>{B();const e=document.getElementById("homeWaterfall");G=new ResizeObserver((a=>{const t=a[0].contentRect;t.width>1200?C.column=6:t.width>900?C.column=5:t.width>600?C.column=4:t.width>300?C.column=3:t.width>200&&(C.column=2),e.style.setProperty("--column",C.column.toString())})),G.observe(e)})),x((()=>{G.disconnect()})),(e,a)=>{const t=E,l=z,s=A,i=H,r=M,u=w("IconNavigation"),v=N,g=o,x=w("IconViewList"),R=O,B=W,D=q,F=L,G=n;return d(),_("div",null,[m(F,null,{default:p((()=>[m(r,{class:"border-b-[1px] items-center flex"},{default:p((()=>[m(i,{class:"justify-between items-center"},{default:p((()=>[m(t,{span:4,class:"h-[50px]"},{default:p((()=>[T])),_:1}),m(t,{span:6,class:"flex justify-end col-user"},{default:p((()=>[f(S)?(d(),_("div",X,[m(l,null,{default:p((()=>[y(b(f(S)),1)])),_:1})])):(d(),_("div",$,[m(s,{type:"primary",onClick:a[0]||(a[0]=e=>V(!0))},{default:p((()=>[y("登陆/注册")])),_:1})]))])),_:1})])),_:1})])),_:1}),m(F,null,{default:p((()=>[m(B,{width:"216px"},{default:p((()=>[m(R,{"active-text-color":"#000","default-active":"1",class:"pt-[20px] h-lvh"},{default:p((()=>[m(v,{index:"1"},{default:p((()=>[j("span",Q,[m(u)]),Y])),_:1}),m(v,{index:"2"},{default:p((()=>[j("span",Z,[m(g,{"icon-class":"chatgpt",className:"svg-size"})]),ee])),_:1}),m(v,{index:"3"},{default:p((()=>[j("span",ae,[m(x)]),te])),_:1})])),_:1})])),_:1}),m(D,{onScroll:f(U),class:"h-lvh",id:"main"},{default:p((()=>[m(J),m(i,{class:"mt-[40px]"},{default:p((()=>[le])),_:1}),m(k,{name:f(C).move?"group":"",tag:"div",class:"waterfall-box",id:"homeWaterfall"},{default:p((()=>[(d(!0),_(P,null,I(f(C).items,((e,a)=>(d(),_("div",{class:"waterfall-item",key:e.id},[j("img",{class:"pic",src:e.preview,alt:"",ref_for:!0,ref:e=>((e,a)=>{if(!e)return;const t=()=>{const t=e.parentElement;if(!t)return;const l=a>=C.column?8:0,s=Math.ceil(t.clientHeight/2)+l;t.style.gridRowEnd=`span ${s}`};t(),e.onload=t,e.onerror=function(){e.src=new URL(""+new URL("loading-356a6359.gif",import.meta.url).href,self.location).href,t()}})(e,a),onClick:a=>(e=>{const{href:a}=c.resolve({path:"/",query:{template:e}});window.open(a,"_blank")})(e.id)},null,8,se),j("div",ne,b(e.title),1),j("div",oe,b(e.text),1)])))),128))])),_:1},8,["name"])])),_:1},8,["onScroll"])])),_:1})])),_:1}),m(G,{visible:f(h),onClose:V},null,8,["visible"])])}}}),[["__scopeId","data-v-d9d3b263"]]);export{ie as default};
